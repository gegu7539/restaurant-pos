<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>羊肉汤小吃店</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/style.css">
  <!-- Firebase SDK (已移除，转为纯本地模式) -->
  <!-- <script src="https://unpkg.com/firebase@9.22.0/firebase-app-compat.js"></script> -->
  <!-- <script src="https://unpkg.com/firebase@9.22.0/firebase-auth-compat.js"></script> -->
  <!-- <script src="https://unpkg.com/firebase@9.22.0/firebase-database-compat.js"></script> -->
</head>

<body>
  <div class="app-container">
    <!-- 主内容区 -->
    <div class="main-content">
      <!-- 顶部栏 -->
      <header class="header">
        <h1>🍜 羊肉汤小吃店</h1>
        <div class="header-actions">
          <button class="btn btn-outline" onclick="openKitchen()">👨‍🍳 厨房显示</button>
          <button class="btn btn-outline" onclick="showOrderHistory()">📋 历史订单</button>
          <button class="btn btn-danger" onclick="resetOrderNumber()">🔄 重置编号</button>
        </div>
      </header>

      <!-- 分类导航 -->
      <nav class="categories" id="categories">
        <!-- 动态生成 -->
      </nav>

      <!-- 菜品网格 -->
      <div class="menu-grid" id="menuGrid">
        <!-- 动态生成 -->
      </div>
    </div>

    <!-- 购物车面板 -->
    <aside class="cart-panel" id="cartPanel">
      <div class="cart-header" onclick="toggleCartExpand()">
        <h2>🛒 当前订单</h2>
        <div class="order-number" id="orderNumber">订单号: #001</div>
      </div>

      <!-- 堂食/打包选择 -->
      <div class="dining-type-selector" style="padding: 10px 15px; border-bottom: 1px solid #eee; background: white;">
        <div style="display: flex; gap: 8px; background: #f5f5f5; padding: 4px; border-radius: 8px;">
          <button id="btnDineIn" onclick="setDiningType('dine-in')" 
                  style="flex:1; border:none; padding: 8px; border-radius: 6px; cursor: pointer; background: white; color: #333; font-weight: bold; box-shadow: 0 1px 2px rgba(0,0,0,0.1); transition: all 0.2s;">
            🏠 堂食
          </button>
          <button id="btnTakeout" onclick="setDiningType('takeout')" 
                  style="flex:1; border:none; padding: 8px; border-radius: 6px; cursor: pointer; background: transparent; color: #666; transition: all 0.2s;">
            🥡 打包
          </button>
        </div>
      </div>

      <div class="cart-content" id="cartContent">
        <!-- 动态生成 -->
      </div>

      <div class="cart-footer">
        <div class="total-row">
          <span class="total-label">总计</span>
          <span class="total-amount" id="totalAmount">¥0</span>
        </div>
        <button class="submit-btn" id="submitBtn" onclick="submitOrder()" disabled>
          提交订单
        </button>
      </div>
    </aside>
  </div>

  <!-- 组合点单弹窗 -->
  <div class="modal-overlay" id="comboModal">
    <div class="modal combo-modal">
      <h3 id="comboModalTitle">🍜 主食组合</h3>

      <!-- 食材选择 -->
      <div class="combo-section">
        <h4>选择食材和份量</h4>
        <div class="combo-items" id="comboItems">
          <!-- 动态生成 -->
        </div>
      </div>

      <!-- 口味选择 -->
      <div class="combo-section" id="flavorSection">
        <h4>口味</h4>
        <div class="flavor-options" id="flavorOptions">
          <!-- 动态生成 -->
        </div>
      </div>

      <!-- 加辣选择 -->
      <div class="combo-section">
        <h4>辣度</h4>
        <div class="spicy-options">
          <label class="radio-label">
            <input type="radio" name="spicy" value="no" checked> 不加辣
          </label>
          <label class="radio-label">
            <input type="radio" name="spicy" value="yes"> 加辣 🌶️
          </label>
        </div>
      </div>

      <!-- 备注 -->
      <div class="combo-section">
        <h4>备注</h4>
        <input type="text" id="comboRemark" class="remark-input" placeholder="如：多放醋、少盐等">
      </div>

      <!-- 小计 -->
      <div class="combo-subtotal">
        <span>小计：</span>
        <span id="comboSubtotal">¥0</span>
      </div>

      <div class="modal-actions">
        <button class="btn btn-outline" onclick="closeComboModal()">取消</button>
        <button class="btn btn-success" onclick="addComboToCart()">加入购物车</button>
      </div>
    </div>
  </div>

  <!-- 汤类点单弹窗 -->
  <div class="modal-overlay" id="soupModal">
    <div class="modal">
      <h3>🍲 汤类点单</h3>

      <div class="soup-items" id="soupItems">
        <!-- 动态生成 -->
      </div>

      <!-- 小计 -->
      <div class="combo-subtotal">
        <span>小计：</span>
        <span id="soupSubtotal">¥0</span>
      </div>

      <div class="modal-actions">
        <button class="btn btn-outline" onclick="closeSoupModal()">取消</button>
        <button class="btn btn-success" onclick="addSoupToCart()">加入购物车</button>
      </div>
    </div>
  </div>

  <!-- 订单历史弹窗 -->
  <div class="modal-overlay" id="historyModal">
    <div class="modal">
      <h3>📋 历史订单</h3>
      <p>选择订单以追加饮料：</p>
      <div class="orders-list" id="ordersList">
        <!-- 动态生成 -->
      </div>
      <div class="modal-actions" style="justify-content: space-between;">
        <button class="btn btn-danger" onclick="clearOrderHistory()">🗑️ 清空历史</button>
        <button class="btn btn-outline" onclick="closeHistoryModal()">关闭</button>
      </div>
    </div>
  </div>

  <!-- 确认弹窗 -->
  <div class="modal-overlay" id="confirmModal">
    <div class="modal">
      <h3 id="confirmTitle">确认操作</h3>
      <p id="confirmMessage"></p>
      <div class="modal-actions">
        <button class="btn btn-outline" onclick="closeConfirmModal()">取消</button>
        <button class="btn btn-success" id="confirmBtn">确认</button>
      </div>
    </div>
  </div>

  <script src="js/app.js"></script>
</body>

</html>